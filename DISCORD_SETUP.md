# Discord Integration Setup Guide

## üìã –ü—Ä–µ–≥–ª–µ–¥

Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ç–∞ –ø–æ–∑–≤–æ–ª—è–≤–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ Discord bot –∏ webhook –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–∞—Ç–∞ –ø–∞–Ω–µ–ª. –í–∫–ª—é—á–≤–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ –±–æ—Ç–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞–Ω–∞–ª–∏, webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ª–æ–≥ –Ω–∞ –∏–∑–ø—Ä–∞—Ç–µ–Ω–∏ —Å—ä–æ–±—â–µ–Ω–∏—è.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. Discord Bot Setup

1. –û—Ç–∏–¥–∏ –Ω–∞ [Discord Developer Portal](https://discord.com/developers/applications)
2. –°—ä–∑–¥–∞–π –Ω–æ–≤–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (New Application)
3. –û—Ç–∏–¥–∏ –≤ "Bot" —Å–µ–∫—Ü–∏—è—Ç–∞
4. –ö–ª–∏–∫–Ω–∏ "Add Bot"
5. –ö–æ–ø–∏—Ä–∞–π Bot Token
6. –í–∫–ª—é—á–∏ —Å–ª–µ–¥–Ω–∏—Ç–µ Privileged Gateway Intents:
   - ‚úÖ Presence Intent
   - ‚úÖ Server Members Intent
   - ‚úÖ Message Content Intent

### 2. Bot Permissions

–í "OAuth2" ‚Üí "URL Generator":
- –ò–∑–±–µ—Ä–∏ scopes: `bot`
- –ò–∑–±–µ—Ä–∏ permissions:
  - ‚úÖ Read Messages/View Channels
  - ‚úÖ Send Messages
  - ‚úÖ Embed Links
  - ‚úÖ Read Message History

### 3. Invite Bot to Server

–ò–∑–ø–æ–ª–∑–≤–∞–π –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—è URL –∑–∞ –¥–∞ –ø–æ–∫–∞–Ω–∏—à –±–æ—Ç–∞ –≤ —Å—ä—Ä–≤—ä—Ä–∞.

### 4. Environment Variables

–î–æ–±–∞–≤–∏ –≤ `.env.local`:

```env
# Discord Bot Token
DISCORD_BOT_TOKEN=your_bot_token_here

# Discord Server (Guild) ID
DISCORD_GUILD_ID=your_guild_id_here

# Discord Channel ID (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ, –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–º–µ–Ω—è –æ—Ç –ø–∞–Ω–µ–ª–∞)
DISCORD_CHANNEL_ID=your_channel_id_here

# Discord Webhook URL (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ, –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–º–µ–Ω—è –æ—Ç –ø–∞–Ω–µ–ª–∞)
DISCORD_WEBHOOK_URL=your_webhook_url_here
```

### 5. –ö–∞–∫ –¥–∞ –Ω–∞–º–µ—Ä–∏—à Guild ID –∏ Channel ID

1. –í–∫–ª—é—á–∏ Developer Mode –≤ Discord:
   - Settings ‚Üí Advanced ‚Üí Developer Mode
2. Guild ID:
   - –î—è—Å–Ω–æ –∫–ª–∏–∫–≤–∞–Ω–µ –≤—ä—Ä—Ö—É —Å—ä—Ä–≤—ä—Ä–∞ ‚Üí Copy Server ID
3. Channel ID:
   - –î—è—Å–Ω–æ –∫–ª–∏–∫–≤–∞–Ω–µ –≤—ä—Ä—Ö—É –∫–∞–Ω–∞–ª–∞ ‚Üí Copy Channel ID

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
app/admin/discord/
‚îî‚îÄ‚îÄ page.tsx                    # Discord –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

components/admin/discord/
‚îú‚îÄ‚îÄ DiscordIntegration.tsx      # –ì–ª–∞–≤–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ BotStatus.tsx               # –°—Ç–∞—Ç—É—Å –Ω–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ WebhookSettings.tsx         # Webhook –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ ChannelSelector.tsx         # –ò–∑–±–æ—Ä –Ω–∞ –∫–∞–Ω–∞–ª
‚îî‚îÄ‚îÄ MessageLog.tsx              # –õ–æ–≥ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è

app/api/discord/
‚îú‚îÄ‚îÄ status/route.ts             # –°—Ç–∞—Ç—É—Å –Ω–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ channels/route.ts            # –°–ø–∏—Å—ä–∫ —Å –∫–∞–Ω–∞–ª–∏
‚îú‚îÄ‚îÄ channel/route.ts             # –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ –∫–∞–Ω–∞–ª
‚îú‚îÄ‚îÄ webhook/route.ts             # –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ webhook
‚îú‚îÄ‚îÄ messages/route.ts            # –õ–æ–≥ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è
‚îî‚îÄ‚îÄ connect/route.ts             # –°–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ –±–æ—Ç–∞

lib/discord/
‚îî‚îÄ‚îÄ client.ts                    # Discord.js –∫–ª–∏–µ–Ω—Ç
```

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏

### Bot Status
- –ü–æ–∫–∞–∑–≤–∞ —Ç–µ–∫—É—â–∏—è —Å—Ç–∞—Ç—É—Å –Ω–∞ –±–æ—Ç–∞ (Online, Offline, Idle, DND)
- –í–∏–∑—É–∞–ª–µ–Ω –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å –∞–Ω–∏–º–∞—Ü–∏—è
- –ë—É—Ç–æ–Ω –∑–∞ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ –∞–∫–æ –±–æ—Ç—ä—Ç –µ –æ—Ñ–ª–∞–π–Ω

### Webhook Settings
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ webhook URL
- –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ webhook
- –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ

### Channel Selector
- Dropdown —Å –≤—Å–∏—á–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏ –∫–∞–Ω–∞–ª–∏
- –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ —Ü–µ–ª–µ–≤–∏—è –∫–∞–Ω–∞–ª
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –∏–∑–±—Ä–∞–Ω–∏—è –∫–∞–Ω–∞–ª

### Message Log
- –õ–æ–≥ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–∏ —Å—ä–æ–±—â–µ–Ω–∏—è
- –ü–æ–∫–∞–∑–≤–∞ —Å—Ç–∞—Ç—É—Å (—É—Å–ø–µ—Ö/–≥—Ä–µ—à–∫–∞)
- –¢–∏–ø –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏–µ—Ç–æ (Webhook/Bot)
- Timestamp –Ω–∞ –≤—Å—è–∫–æ —Å—ä–æ–±—â–µ–Ω–∏–µ

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: 
- –ù–∏–∫–æ–≥–∞ –Ω–µ —Å–ø–æ–¥–µ–ª—è–π Bot Token –ø—É–±–ª–∏—á–Ω–æ
- –ù–µ –∫–æ–º–∏—Ç–∏—Ä–∞–π `.env.local` –≤ git
- –ò–∑–ø–æ–ª–∑–≤–∞–π environment variables –∑–∞ –≤—Å–∏—á–∫–∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏ –¥–∞–Ω–Ω–∏
- –í production, –∑–∞–ø–∞–∑–≤–∞–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –≤ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏, –Ω–µ –≤ environment variables

## üêõ Troubleshooting

### Bot –Ω–µ —Å–µ —Å–≤—ä—Ä–∑–≤–∞
- –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ `DISCORD_BOT_TOKEN` –µ –ø—Ä–∞–≤–∏–ª–µ–Ω
- –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ –±–æ—Ç—ä—Ç –µ –ø–æ–∫–∞–Ω–µ–Ω –≤ —Å—ä—Ä–≤—ä—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ intents —Å–∞ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∏

### –ö–∞–Ω–∞–ª–∏—Ç–µ –Ω–µ —Å–µ –∑–∞—Ä–µ–∂–¥–∞—Ç
- –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ `DISCORD_GUILD_ID` –µ –ø—Ä–∞–≤–∏–ª–µ–Ω
- –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ –±–æ—Ç—ä—Ç –∏–º–∞ –ø—Ä–∞–≤–∞ –¥–∞ –≤–∏–∂–¥–∞ –∫–∞–Ω–∞–ª–∏—Ç–µ

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∏ –¥–∞–ª–∏ webhook URL –µ –ø—Ä–∞–≤–∏–ª–µ–Ω
- –ò–∑–ø–æ–ª–∑–≤–∞–π "–¢–µ—Å—Ç" –±—É—Ç–æ–Ω–∞ –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
- –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ webhook –Ω–µ –µ –∏–∑—Ç—Ä–∏—Ç –≤ Discord

## üìù –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase –∑–∞ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- [ ] Real-time –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å–∞
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ —Å—ä–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ —Å—ä–±–∏—Ç–∏—è
- [ ] –ö–æ–º–∞–Ω–¥–∏ –∑–∞ –±–æ—Ç–∞
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
